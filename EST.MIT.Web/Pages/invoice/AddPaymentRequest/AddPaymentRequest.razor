@page "/invoice/add-payment-request"
@using EST.MIT.Web.Shared.Components.GDSInputInt
@using EST.MIT.Web.Shared.Components.GDSInputText
@using EST.MIT.Web.Shared.Components.InvoiceMetaData
@using Helpers

@if(!invoice.IsNull())
{
    <section class="govuk-width-container govuk-!-padding-top-9">
        <h1 class="govuk-heading-l">
            Add Payment Request
        </h1>
    </section>

    <InvoiceMetaData Invoice=invoice/>

    <section class="govuk-width-container">
        
        <EditForm Model="paymentRequest" OnSubmit="SaveHeader" class="govuk-!-padding-top-6">

            <GDSInputText @bind-Data="paymentRequest.ClaimReferenceNumber" Label="Claim Reference Number" Key="ClaimReferenceNumber" Errors="errors" />
            <GDSInputText @bind-Data="paymentRequest.ClaimReference" Label="Claim Reference" Key="ClaimReference" Errors="errors" />
            <GDSInputText @bind-Data="paymentRequest.CustomerId" Label="Customer Id" Key="CustomerId" Errors="errors" />
            <GDSInputText @bind-Data="paymentRequest.Currency" Label="Currency" Key="Currency" Errors="errors" />
            <GDSInputText @bind-Data="paymentRequest.Description" Label="Description" Key="Description" Errors="errors" />

            @if(invoice.AccountType == "AR")
            {
                <GDSInputText @bind-Data="paymentRequest.OriginalClaimReference" Label="Original Claim Reference" Key="OriginalClaimReference" Errors="errors" />
                <GDSInputText @bind-Data="paymentRequest.OriginalSettlementDate" Label="Original Settlement Date" Key="OriginalSettlementDate" Errors="errors" />
                <GDSInputText @bind-Data="paymentRequest.RecoveryIdentified" Label="Recovery Identified" Key="RecoveryIdentified" Errors="errors" />
                <GDSInputText @bind-Data="paymentRequest.InvoiceCorrectionReference" Label="Correction Reference" Key="CorrectionReference" Errors="errors" />
            }

            <div class="govuk-form-group">
                <div class="govuk-button-group">
                    <button type=submit class="govuk-button" data-module="govuk-button">Save and Continue</button>
                    <a class="govuk-link" @onclick="Cancel" href>Cancel</a>
                </div>
            </div>

        </EditForm>

    </section>
}